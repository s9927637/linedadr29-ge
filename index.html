<!DOCTYPE html>
<html>
<head>
    <title>疫苗預約</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
    <h2>填寫疫苗預約資訊</h2>
    <form id="vaccine-form">
        <label for="name">姓名:</label>
        <input type="text" id="name" name="name" required><br>
        
        <label for="vaccine">疫苗名稱:</label>
        <input type="text" id="vaccine" name="vaccine" required><br>
        
        <label for="date">接種日期:</label>
        <input type="date" id="date" name="date" required><br>
        
        <button type="submit">提交</button>
    </form>

    <script>
        // 初始化LIFF
        liff.init({ liffId: "YOUR_LIFF_ID" }).then(() => {
            // 取得用戶ID
            liff.getProfile().then(profile => {
                document.getElementById('userID').value = profile.userId;
            });
        });

        document.getElementById('vaccine-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const userName = document.getElementById('name').value;
            const vaccineName = document.getElementById('vaccine').value;
            const appointmentDate = document.getElementById('date').value;
            const userID = liff.getProfile().userId;

            // 傳送資料到伺服器（後端）
            fetch('/saveData', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ userID, userName, vaccineName, appointmentDate }),
            }).then(response => response.json())
              .then(data => alert('預約已成功提交！'))
              .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
